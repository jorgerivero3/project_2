{% extends "layout.html" %}
{% block content %}

<div>
	{% for i in range(questions|length) %}
	<span id={{i|string}} hidden>
		{{ questions[i]['question']|safe }}<br>
		{% for j in range(questions[i]['incorrect_answers']|length) %}
			{% if questions[i]['incorrect_answers'][j] == questions[i]["correct_answer"] %}
				<button onclick="correct();">{{ questions[i]['incorrect_answers'][j]|safe }}</button>
			{% else %}
				<button onclick="incorrect();">{{ questions[i]['incorrect_answers'][j]|safe }}</button>
			{% endif %}
		{% endfor %}
		<br>
	</span>
	{% endfor %}
</div>

<script type="text/javascript">
	<!--
	var ind = 0;
	var last = {{ correct }};
	document.getElementById(ind.toString()).removeAttribute("hidden");
	function correct(){
		document.getElementById(ind.toString()).hidden = true;
		ind++;
		if (document.getElementById(ind.toString()) == null){
			if (last == -1){
				pass();
			}
			else{
				check(last, ind);
			}
		}
		else{
			document.getElementById(ind.toString()).removeAttribute("hidden");
		}
	}
	function incorrect(){
		if (last == -1){
			pass();
		}
		else{
			check(last, ind);
		}
	}
	function check(play1, play2){
		if (play1 > play2){
			window.alert('Player 1 Wins!')
		}
		else if (play1 == play2){
			window.alert('Tie Game')
		}
		else{
			window.alert('Player 2 Wins!')
		}
	}
	function pass(){
		window.alert("Pass device to Player 2")
		window.location = window.location.href + '/' + ind.toString();
	}

	// -->
</script>
{% endblock %}
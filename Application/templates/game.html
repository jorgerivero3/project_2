{% extends "layout.html" %}
{% block content %}

<body style="text-align: center">
	{% for i in range(questions|length) %}
	<span id={{i|string}} hidden>
		{{ questions[i]['question']|safe }}<br>
		{% for j in range(questions[i]['incorrect_answers']|length) %}
			{% if questions[i]['incorrect_answers'][j] == questions[i]["correct_answer"] %}
				<button onclick="correct();score_keeper();">{{ questions[i]['incorrect_answers'][j]|safe }}</button>
			{% else %}
				<button onclick="incorrect();">{{ questions[i]['incorrect_answers'][j]|safe }}</button>
			{% endif %}
		{% endfor %}
		<br>
	</span>
	<div id='score'>
	</div>
	{% endfor %}
</body>

<script type="text/javascript">
	<!--
	var ind = 0;
	var last = {{ correct }};
	document.getElementById(ind.toString()).removeAttribute("hidden");
	score_keeper();
	function correct(){
		document.getElementById(ind.toString()).hidden = true;
		ind++;
		if (document.getElementById(ind.toString()) == null){
			if (last == -1){
				window.alert("Pass device to player 2")
				pass();
			}
			else{
				check(last, ind);
			}
		}
		else{
			document.getElementById(ind.toString()).removeAttribute("hidden");
		}
	}
	function incorrect(){
		if (last == -1){
			window.alert("Pass device to Player 2")
			pass();
		}
		else{
			check(last, ind);
		}
	}
	function check(play1, play2){
		if (play1 > play2){
			pass();
		}
		else if (play1 == play2){
			pass();
		}
		else{
			pass();
		}
	}
	function pass(){
		window.location = window.location.href + '/' + ind.toString();
	}
    function score_keeper(){
	    if (last == -1){
	    	document.getElementById("score").innerHTML = ind.toString() + ' - 0';
	    }
	    else{
	    	document.getElementById("score").innerHTML = last.toString() + ' - ' + ind.toString();
	    }
    }

	// -->
</script>
{% endblock %}